<!doctype html>
<html lang="pt-BR">

<head>
    <meta charset="utf-8">
    <title>Menu - Rawr Rawr</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/index.css">

</head>

<body>

    <h1>Menu de Jogos</h1>

    <div class="container-menu">
        <!-- QUADRADO DO JOGO: Rawr Rawr -->
        <div class="game-card" onclick="startGame('./pages/rawr-rawr.html')">
            <div class="game-icon" style="background-image: url('images/index/Menu/DinoIcon.png');"></div>
            <div class="game-title">Rawr Rawr</div>
        </div>

        <!-- QUADRADO DO JOGO: Space Shooter -->
        <div class="game-card" onclick="startGame('./pages/space.html')">
            <div class="game-icon" style="background-image: url('images/index/Menu/SpaceIcon.png');"></div>
            <div class="game-title">Space Shooter</div>
        </div>
    </div>

    <!-- Loading overlay (inserir antes do script) -->
    <div id="loadingOverlay" aria-hidden="true" class="">
        <div class="loading-box" role="dialog" aria-label="Carregando jogo">
            <div class="loading-title">Carregando Rawr Rawr...</div>
            <div class="loading-track" role="progressbar" aria-valuemin="0" aria-valuemax="100">
                <div class="loading-fill" aria-hidden="true"></div>
            </div>
        </div>
    </div>

    <script>
        function startGame(targetPage = './pages/rawr-rawr.html') {
            const overlay = document.getElementById('loadingOverlay');
            const fill = overlay.querySelector('.loading-fill');
            const title = overlay.querySelector('.loading-title');

            // define automaticamente o nome do jogo
            if (targetPage.includes("rawr"))
                title.textContent = "Carregando Rawr Rawr...";
            else if (targetPage.includes("space"))
                title.textContent = "Carregando Space Shooter...";
            else
                title.textContent = "Carregando...";

            if (overlay.classList.contains('active')) return;

            overlay.classList.add('active');
            fill.style.width = '0%';
            void fill.offsetWidth;

            setTimeout(() => fill.style.width = '100%', 50);

            const redirectAfter = 1800;
            setTimeout(() => window.location.href = targetPage, redirectAfter);
        }
    </script>

</body>

</html>